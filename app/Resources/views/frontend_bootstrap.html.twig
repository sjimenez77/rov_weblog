{% extends '::base.html.twig' %}

{% set locale = app.request.locale %}
{% block lang %}{{ locale }}{% endblock %}
{% block title %}{% endblock %}

{% block meta %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="Web dedicada a la cultura del vino, agricultura, agricultura ecológica y temas relacionados">
    <meta name="keywords" content="vino, wine, enología, enology, enólogo, enologist, variedades, varieties, agricultura, agriculture, winemaker, ecológico, ecológica, organic">
    <meta name="author" content="Santos Jiménez Linares">
{% endblock %}

{% block stylesheets %}
    {# Assetic #}
    {% stylesheets filter='?uglifycss' 
        'bundles/rovstart/css/bootstrap.css'
        'bundles/rovstart/css/bootstrap-wysihtml5.css'
        'bundles/rovstart/css/bootstrap3-wysiwyg5-color.css'
        'bundles/rovstart/css/modern-business.css'
        'bundles/rovstart/font-awesome/css/font-awesome.min.css'
        'bundles/rovstart/js/select2/select2.css'
        'bundles/rovstart/css/select2-bootstrap.css'
        'bundles/rovstart/css/theme.bootstrap.css'
        'bundles/rovstart/css/custom.css'
        filter='cssrewrite'
        output='css/compiled/main.css' %}
        <link href="{{ asset_url }}" rel="stylesheet">
    {% endstylesheets %}
{% endblock %}

{% block ie %}
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
{% endblock %}

{% block icons %}
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" href="{{ asset('/images/apple-touch-icon.png') }}">
    <link rel="shortcut icon" href="{{ asset('/images/favicon.ico') }}">
{% endblock %}

{% block body %}
    {% include '::navbar.html.twig' %}
{% endblock %}

{% block footer %}
    {% include '::footer.html.twig' %}
{% endblock %}

{% block js %}
    {# Assetic #}
    {% javascripts filter='?uglifyjs2' 
        '@ROVStartBundle/Resources/public/js/wysihtml5-0.3.0.js' 
        '//code.jquery.com/jquery-1.11.0.min.js'
        '//code.jquery.com/jquery-migrate-1.2.1.min.js'
        '@ROVStartBundle/Resources/public/js/bootstrap.js' 
        '@ROVStartBundle/Resources/public/js/modern-business.js' 
        '@ROVStartBundle/Resources/public/js/holder.js'
        '@ROVStartBundle/Resources/public/js/bootstrap3-wysihtml5.js' 
        '@ROVStartBundle/Resources/public/js/select2/select2.js' 
        '@ROVStartBundle/Resources/public/js/share.min.js' 
        output='js/compiled/main.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <script type="text/javascript">
        // *** Eventos **************************************************************************
        var amplia_footer = function() {
            // Ampliamos el alto del footer hasta el fondo de la página en el caso
            // de que el contenido sea demasiado pequeño y el footer se quede por 
            // encima del mismo
            var diferencia = $(window).height() - ($('footer').height() + $('footer').offset().top);
            if (diferencia > 0) {
                var altura_footer = $('footer').height();
                $('footer').height(altura_footer + diferencia - 50);
            } else {
                $('footer').height('auto');
            }
            return true;
        };

        $(function () {
            $(window).on('resize', function() {amplia_footer()} );
            $(window).on('ready', function() {setTimeout(function(){amplia_footer()},100)} );
            $('button.close').on('click', function() {setTimeout(function(){amplia_footer()},50)} );
        });
    </script>
{% endblock %}